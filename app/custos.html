<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Custos Fixos | RF Finance Empresarial</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="../theme/variables.css">
<link rel="stylesheet" href="../theme/global.css">
</head>
<body>

<main class="container">
  <h1>Custos Fixos Mensais</h1>
  <p>Informe os custos que existem todo mês, independentemente das vendas.</p>

  <label>Descrição</label>
  <input id="descricao" type="text" placeholder="Ex: Aluguel">

  <label>Valor Mensal (R$)</label>
  <input id="valor" type="number" step="0.01" placeholder="Ex: 1500">

  <button onclick="adicionar()">Adicionar Custo</button>

  <hr>

  <h2>Lista de Custos</h2>
  <ul id="lista"></ul>

  <h3>Total Mensal: R$ <span id="total">0,00</span></h3>
</main>

<script src="../core/storage.js"></script>
<script src="../core/datamanager.js"></script>
<script src="../core/financeiro.js"></script>

<script>
function adicionar() {
  if (!descricao.value || !valor.value) {
    alert("Preencha todos os campos");
    return;
  }

  DataManager.push("custos.fixos", {
    descricao: descricao.value,
    valor: Number(valor.value)
  });

  descricao.value = "";
  valor.value = "";
  render();
}

function render() {
  const listaEl = document.getElementById("lista");
  listaEl.innerHTML = "";

  const fixos = DataManager.get("custos.fixos") || [];

  fixos.forEach((c, i) => {
    const li = document.createElement("li");
    li.innerHTML = `
      ${c.descricao} - R$ ${c.valor.toFixed(2)}
      <button onclick="remover(${i})">X</button>
    `;
    listaEl.appendChild(li);
  });

  document.getElementById("total").innerText =
    Financeiro.custoFixoMensal().toFixed(2);
}

function remover(index) {
  const fixos = DataManager.get("custos.fixos");
  fixos.splice(index, 1);
  DataManager.set("custos.fixos", fixos);
  render();
}

render();
</script>

</body>
</html>