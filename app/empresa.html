<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Empresa | RF Finance Empresarial</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="../theme/variables.css">
<link rel="stylesheet" href="../theme/global.css">
</head>
<body>

<main class="container">
  <h1>Cadastro da Empresa</h1>
  <p>Essas informações são usadas para calcular impostos e preços corretamente.</p>

  <label>Nome da Empresa</label>
  <input id="nome" type="text" placeholder="Ex: RF Comércio LTDA">

  <label>Regime Tributário</label>
  <select id="regime" onchange="ajustarRegime()">
    <option value="">Selecione</option>
    <option value="mei">MEI</option>
    <option value="simples">Simples Nacional</option>
  </select>

  <div id="aliquotaBox" style="display:none">
    <label>Alíquota do Simples (%)</label>
    <input id="aliquota" type="number" step="0.01" placeholder="Ex: 6">
    <small>Você encontra esse percentual no DAS ou com seu contador.</small>
  </div>

  <label>Tipo de Empresa</label>
  <select id="tipo">
    <option value="">Selecione</option>
    <option value="comercio">Comércio</option>
    <option value="industria">Indústria</option>
  </select>

  <button onclick="salvar()">Salvar e Continuar</button>
</main>

<script src="../core/datamanager.js"></script>

<script>
function ajustarRegime() {
  const regime = document.getElementById("regime").value;
  document.getElementById("aliquotaBox").style.display =
    regime === "simples" ? "block" : "none";
}

function salvar() {
  if (!nome.value || !regime.value || !tipo.value) {
    alert("Preencha todas as informações");
    return;
  }

  DataManager.set("empresa", {
    nome: nome.value,
    regime: regime.value,
    tipo: tipo.value,
    aliquotaSimples: regime.value === "simples"
      ? Number(aliquota.value || 0)
      : 0
  });

  alert("Empresa cadastrada com sucesso");
  window.location.href = "funcionarios.html";
}
</script>

</body>
</html>